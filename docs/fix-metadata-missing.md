# 修复"元数据丢失"问题指南

## 问题描述
App Store Connect中显示订阅产品状态为"元数据丢失"，导致应用内购买时出现"产品不存在"错误。

## 解决步骤

### 1. 完善月度会员元数据
1. 进入 [App Store Connect](https://appstoreconnect.apple.com)
2. 选择应用 "美颜换换"
3. 点击 "订阅" → 选择 "月度会员"
4. 填写以下信息：
   - **产品名称**: `月度会员`
   - **产品描述**: `解锁所有AI功能，享受无限制的换脸体验`
   - **价格**: 选择价格 (建议 HK$128)
   - **本地化**: 确保中文和英文都有完整信息

### 2. 完善年度会员元数据
1. 选择 "年度会员"
2. 填写以下信息：
   - **产品名称**: `年度会员`
   - **产品描述**: `最优惠的选择，解锁所有AI功能`
   - **价格**: 选择价格 (建议 HK$288)
   - **本地化**: 确保中文和英文都有完整信息

### 3. 检查订阅群组配置
1. 确保订阅群组ID: `21776921` 已正确配置
2. 本地化配置: 确保"美颜换换高级会员"显示名称正确
3. 订阅群组显示名称: `美颜换换高级会员`

### 4. 提交审核
1. 保存所有更改
2. 提交产品进行审核
3. 等待Apple审核通过 (通常需要几小时到几天)

## 验证步骤

### 1. 检查产品状态
- 确保所有产品状态从"元数据丢失"变为"准备提交"或"已批准"

### 2. 测试应用内购买
1. 确保设备已登录沙盒测试账户
2. 在真机上测试订阅功能
3. 检查控制台是否有错误信息

### 3. 常见问题排查
- **产品ID不匹配**: 确保代码中的产品ID与App Store Connect完全一致
- **Bundle ID不匹配**: 确保应用Bundle ID与App Store Connect一致
- **沙盒账户问题**: 确保使用正确的沙盒测试账户

## 当前配置状态

✅ **Bundle ID**: `com.digitech.faceglow`
✅ **产品ID**: 
- `com.digitech.faceglow.subscribe.monthly`
- `com.digitech.faceglow.subscribe.yearly`
✅ **应用名称**: `美颜换换`
✅ **StoreKit框架**: 已正确配置
✅ **原生模块**: ApplePayModule已正确实现

❌ **元数据状态**: 需要完善产品元数据

## 预期结果

完成元数据配置后，订阅功能应该能够正常工作，不再出现"产品不存在"错误。
