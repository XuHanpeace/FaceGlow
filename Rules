# Rules

1.  **Response Language**: Always respond in **Chinese** (中文).
2.  **Code Commit**: Do NOT commit code changes automatically without explicit permission.
3.  **AuthGuard**: Avoid complex AuthGuard solutions; avoid rebuilding the app (e.g., `npx react-native run-ios`) for JS-only changes.
4.  **State Management**: Implement new pages using **Redux**.
5.  **Test Pages**: Do NOT create test pages.
6.  **Type Safety**: Prohibit using the `any` type; ensure strict typing.
7.  **Documentation**: Do NOT create new markdown files for every change unless requested. Record rules in this `Rules` file.
8.  **Run iOS**: Use `npx react-native run-ios` to start the iOS app.
9.  **Auth Logic**: `verificationId` should be passed via parameters, not stored. Server enforces expiration.
10. **Network**: Use `axios` for network requests.
11. **Resource Reference**: Do NOT reference non-existent resources.
12. **Execution**: Do NOT immediately execute planned commands unless requested.
13. **Module Imports**: Ensure module import paths are correct when generating code. (New)
14. **Method Verification**: Verify method existence in imported services before calling them. Read definition files first. (New)
15. **Check Imports**: Before using a component or module (especially React Native components like Image, View, Text), ALWAYS verify it is imported. (New)
16. **iOS Release Process**: For major iOS releases, follow this order: (1) Bump version using `node scripts/bump-version.js`, (2) Git commit and tag, (3) Pod install, (4) Build iOS Archive (optional, can be done manually in Xcode), (5) Package and upload JS bundle using `npm run pushy:hot-update -- --packageVersion <version>`, (6) Manually export IPA from Xcode Archive, (7) Upload IPA to Pushy using `npm run pushy:upload-ipa <ipa-path>`. The JS bundle upload may show binding error if native version doesn't exist yet - this is normal and will be resolved after IPA upload. (New)
17. **Patch Release Command**: For small version releases (patch updates), use `npm run patch-release`. This command automatically: (1) Bumps patch version +1, (2) Updates all version files, (3) Git commits and tags, (4) Logs into Pushy, (5) Bundles and uploads JS bundle to Pushy, (6) Binds to current native version. This is the standard command for small version releases. (New)
