# 美颜换换 MVP上线清单

> 更新时间：2025-10-12  
> 目标：快速上线iOS App Store MVP版本

---

## 📊 当前项目状态评估

### ✅ 已完成功能（核心功能）
1. **用户认证系统**
   - ✅ 手机号+验证码登录/注册
   - ✅ 匿名登录
   - ✅ Token刷新机制
   - ✅ 登录状态持久化

2. **核心页面**
   - ✅ 首页（活动展示）
   - ✅ 个人中心
   - ✅ 登录/注册页面
   - ✅ 模板选择页面（BeforeCreationScreen）
   - ✅ 结果展示页面（CreationResultScreen）
   - ✅ 用户作品详情页（UserWorkPreviewScreen）
   - ✅ 自拍引导页面

3. **数据服务**
   - ✅ 活动数据获取
   - ✅ 用户数据管理
   - ✅ 用户作品管理（查询/创建）
   - ✅ 腾讯云COS上传

4. **分享功能**
   - ✅ 保存到相册（已测试通过）
   - ✅ 微信分享准备（需配置AppId）
   - ✅ 分享Modal组件

5. **订阅和支付**
   - ✅ 订阅购买页面
   - ✅ 金币购买页面
   - ⚠️ 需测试iOS内购流程

---

## 🚨 MVP上线前必须完成的任务

### 🔴 高优先级（阻塞上线）

#### 1. AI人脸融合功能实现 ⚠️ **核心功能**
**状态**: 目前使用模拟数据  
**影响**: 这是产品的核心价值，必须实现

**任务清单**:
- [ ] 实现腾讯云人脸融合API调用
- [ ] 创建或配置CloudBase云函数 `faceFusion`
- [ ] 处理融合结果和错误
- [ ] 添加融合进度显示
- [ ] 测试融合成功/失败流程

**实现位置**: `src/services/tcb/tcb.ts`

**预估时间**: 2-3天

---

#### 2. 真实模板数据集成 ⚠️ **核心功能**
**状态**: 当前使用硬编码模拟数据  
**影响**: 用户无法看到真实的模板选择

**任务清单**:
- [ ] 从数据库获取真实的活动和模板数据
- [ ] 确保模板图片URL有效
- [ ] 添加模板加载失败的降级处理
- [ ] 添加分页和缓存机制

**实现位置**: 
- `src/screens/NewHomeScreen.tsx`
- `src/screens/BeforeCreationScreen.tsx`
- `src/services/database/activityService.ts`

**预估时间**: 1-2天

---

#### 3. 用户自拍照上传和管理 ⚠️ **核心功能**
**状态**: 部分实现，需完善

**任务清单**:
- [ ] 完善自拍照上传到COS
- [ ] 保存自拍照URL到用户数据
- [ ] 实现自拍照列表展示和选择
- [ ] 添加上传进度和错误处理
- [ ] 图片质量检查和提示

**实现位置**: 
- `src/screens/SelfieGuideScreen.tsx`
- `src/services/cos/cosService.ts`

**预估时间**: 1-2天

---

#### 4. iOS App Store准备
**任务清单**:
- [ ] 配置应用元数据
  - [ ] 应用名称、副标题
  - [ ] 应用描述
  - [ ] 关键词优化
  - [ ] 应用图标（1024x1024）
  - [ ] 截图（多种设备尺寸）
- [ ] 配置应用Bundle ID
- [ ] 配置签名和证书
- [ ] 隐私政策URL
- [ ] 服务条款URL
- [ ] 支持URL
- [ ] 年龄分级评估

**预估时间**: 2-3天

---

### 🟡 中优先级（建议完成）

#### 5. 错误处理和用户体验优化
**任务清单**:
- [ ] 网络错误统一处理
- [ ] Loading状态优化
- [ ] 空状态页面
- [ ] 错误提示优化
- [ ] 离线状态处理

**预估时间**: 1天

---

#### 6. iOS内购测试和验证
**任务清单**:
- [ ] 配置App Store Connect内购产品
- [ ] 创建沙盒测试账号
- [ ] 测试订阅购买流程
- [ ] 测试金币购买流程
- [ ] 验证收据验证逻辑
- [ ] 测试恢复购买功能

**预估时间**: 2天

---

#### 7. 性能优化
**任务清单**:
- [ ] 图片加载优化（使用FastImage）
- [ ] 列表性能优化
- [ ] 减少不必要的重渲染
- [ ] 内存泄漏检查
- [ ] 启动时间优化

**预估时间**: 1-2天

---

### 🟢 低优先级（可延后）

#### 8. 测试页面清理
**任务清单**:
- [ ] 移除或隐藏TestCenterScreen
- [ ] 移除或隐藏ServiceTestScreen
- [ ] 移除或隐藏DatabaseTestScreen
- [ ] 移除调试日志
- [ ] 清理未使用的代码

**预估时间**: 0.5天

---

#### 9. 社交分享完善
**任务清单**:
- [ ] 申请微信开放平台账号
- [ ] 获取微信AppId
- [ ] 配置Universal Link
- [ ] 测试微信分享功能

**预估时间**: 1-2天（等待审核时间较长）

---

## 📱 App Store上架流程

### 第一阶段：准备（1-2周）
1. **Apple Developer账号**
   - [ ] 注册Apple Developer账号（$99/年）
   - [ ] 同意最新的协议条款

2. **App Store Connect配置**
   - [ ] 创建App记录
   - [ ] 配置App信息
   - [ ] 上传应用元数据
   - [ ] 准备推广素材

3. **代码和构建**
   - [ ] 完成高优先级功能
   - [ ] 测试所有核心流程
   - [ ] 修复已知Bug
   - [ ] 代码签名和打包

### 第二阶段：提交审核（1-3天）
1. **TestFlight测试**
   - [ ] 上传Beta版本
   - [ ] 内部测试
   - [ ] 邀请外部测试者（可选）

2. **提交审核**
   - [ ] 上传正式版本
   - [ ] 填写审核信息
   - [ ] 提供测试账号
   - [ ] 等待审核

### 第三阶段：审核和发布（1-7天）
1. **审核阶段**
   - [ ] 响应审核团队问题
   - [ ] 修复审核问题（如有）
   - [ ] 重新提交（如需要）

2. **发布**
   - [ ] 审核通过后选择发布时间
   - [ ] 监控用户反馈
   - [ ] 快速修复紧急问题

---

## 🎯 MVP最小功能集（必须有）

### 核心流程
1. ✅ 用户注册/登录
2. ⚠️ 上传自拍照
3. ⚠️ 选择模板
4. ⚠️ AI生成换脸图片（**核心功能，必须实现**）
5. ✅ 查看和保存结果
6. ✅ 分享到相册
7. ⚠️ 查看历史作品

### 必需页面
- ✅ 启动页/引导页
- ✅ 首页（活动列表）
- ✅ 登录/注册页
- ✅ 模板选择页
- ✅ 结果展示页
- ✅ 个人中心
- ✅ 自拍引导页

---

## ⚠️ 已知问题和风险

### 技术风险
1. **AI融合功能未实现** - 这是最大的风险，必须尽快完成
2. **模板数据来源** - 需要确保有足够的模板素材
3. **图片URL过期问题** - 需要合理的CDN和缓存策略

### 合规风险
1. **隐私政策** - 必须有完整的隐私政策
2. **用户协议** - 需要明确的服务条款
3. **内购配置** - 需要正确配置和测试
4. **年龄分级** - AI生成内容需要合理分级

### 业务风险
1. **内容审核** - AI生成的图片可能需要人工审核
2. **用户期望** - 需要清晰告知用户功能限制
3. **成本控制** - AI调用成本需要监控

---

## 📅 建议的时间表

### 第1周：核心功能开发
- Day 1-3: 实现AI人脸融合功能
- Day 4-5: 真实模板数据集成
- Day 6-7: 自拍照上传和管理完善

### 第2周：测试和优化
- Day 1-2: iOS内购测试
- Day 3-4: 错误处理和体验优化
- Day 5-6: 整体测试和Bug修复
- Day 7: App Store素材准备

### 第3周：提交和审核
- Day 1-2: TestFlight测试
- Day 3: 提交App Store审核
- Day 4-7: 等待审核，准备营销材料

### 第4周：发布和迭代
- Day 1: 发布上线
- Day 2-7: 监控反馈，快速迭代

---

## 🔗 相关文档和资源

### 项目文档
- [数据库设计](./docs/database-design.md)
- [iOS订阅测试指南](./docs/ios-subscription-test-guide.md)
- [Apple Pay配置](./docs/apple-pay-setup.md)

### 外部资源
- [App Store审核指南](https://developer.apple.com/app-store/review/guidelines/)
- [腾讯云人脸融合文档](https://cloud.tencent.com/document/product/670)
- [React Native发布指南](https://reactnative.dev/docs/publishing-to-app-store)

---

## 💡 MVP上线建议

### DO ✅
1. **专注核心功能** - 确保AI融合功能完美工作
2. **快速迭代** - 先上线基础版本，后续快速迭代
3. **收集反馈** - 重视用户反馈，快速响应
4. **稳定性优先** - 宁可功能少，但要稳定
5. **准备好营销素材** - 好的截图和描述很重要

### DON'T ❌
1. **不要功能过载** - MVP不需要所有功能
2. **不要过度优化** - 先保证功能可用
3. **不要忽视合规** - 隐私政策和服务条款必须有
4. **不要跳过测试** - 核心流程必须测试
5. **不要仓促提交** - 审核被拒会延长上线时间

---

## 📊 成功指标

### 技术指标
- [ ] 所有核心功能可用
- [ ] 崩溃率 < 1%
- [ ] 启动时间 < 3秒
- [ ] AI融合成功率 > 95%

### 业务指标
- [ ] 通过App Store审核
- [ ] 用户可以完成完整流程
- [ ] 用户满意度（初期收集）

---

## 🚀 下一步行动

### 立即开始（本周）
1. **确认AI融合API** - 与后端确认API接口和参数
2. **准备模板素材** - 确保有足够的模板数据
3. **开始开发AI融合功能** - 这是阻塞上线的最关键任务

### 并行进行
1. **申请Apple Developer账号** - 如果还没有
2. **准备App Store素材** - 截图、图标、描述文案
3. **撰写隐私政策和服务条款** - 可以使用模板

---

**注意**: 这是一个MVP清单，重点是"最小可行产品"。不需要完美，但需要核心功能可用和稳定。🎯

